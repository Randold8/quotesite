<!-- templates/quotes/random.html -->
{% extends 'quotes/base.html' %}
{% block content %}
  <h2 class="headings">–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</h2>
  <div class="spacer"></div>

  {% if quote %}
    <div class="stat-chip">üëÅ –ü–æ–∫–∞–∑–æ–≤ —ç—Ç–æ–π —Ü–∏—Ç–∞—Ç—ã: {{ quote.views }}</div>
    <div class="spacer"></div>

    <div class="card quote-card quote-card--with-cover fade-up">
      {% if quote.source.image_url %}
        <div class="cover">
          <img src="{{ quote.source.image_url }}"
               alt="–û–±–ª–æ–∂–∫–∞: {{ quote.source.name }}"
               loading="lazy"
               onerror="this.closest('.cover').style.display='none'">
        </div>
      {% endif %}

      <div class="quote-body">
        <blockquote class="quote-text">‚Äú{{ quote.text }}‚Äù</blockquote>

        <div class="meta">
          <span class="badge">–ò—Å—Ç–æ—á–Ω–∏–∫: {{ quote.source.get_type_display }} ‚Äî {{ quote.source.name }}</span>
          <span class="badge warn">–í–µ—Å: {{ quote.weight }}</span>
          <span class="badge success">‚ù§Ô∏è {{ quote.likes }}</span>
          <span class="badge danger">üíî {{ quote.dislikes }}</span>
        </div>

        <div class="vote toolbar">
          <form method="post" action="{% url 'quotes:vote' quote.pk 'like' %}">
            {% csrf_token %}
            <button class="btn btn-like" type="submit" aria-label="–ü–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫">‚ù§Ô∏è –õ–∞–π–∫</button>
          </form>
          <form method="post" action="{% url 'quotes:vote' quote.pk 'dislike' %}">
            {% csrf_token %}
            <button class="btn btn-dislike" type="submit" aria-label="–ü–æ—Å—Ç–∞–≤–∏—Ç—å –¥–∏–∑–ª–∞–π–∫">üíî –î–∏–∑–ª–∞–π–∫</button>
          </form>
          <a class="btn btn-outline" href="{% url 'quotes:random' %}">–ü–æ–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥—É—é ‚Üª</a>
        </div>
      </div>
    </div>
  {% else %}
    <div class="card fade-up">–ü–æ–∫–∞ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π —Ü–∏—Ç–∞—Ç—ã. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é!</div>
  {% endif %}
{% endblock %}
